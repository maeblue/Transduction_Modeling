go atlas simflags="-P 1"

#Set a scale factor for all other 'spac' values to 1nm
mesh  space.mult=1

#Define different mesh densities along the x axis 
x.mesh loc=0.00 spac=0.05
x.mesh loc=0.40 spac=0.02
x.mesh loc=0.60 spac=0.02
x.mesh loc=1.00 spac=0.05

#Define different mesh densities along the y axis
y.mesh loc=0.00 spac=0.001
y.mesh loc=0.40 spac=0.05
y.mesh loc=0.90 spac=0.10

#We have air on top of InAs on top of GaAs
#I tried re-writing the regions to not cross xp boundaries
region  num=1	material=air x.min=0 x.max=1 y.min=0.0 y.max=0.10
region  num=2	material=InAs x.min=0.0 x.max=1.00 y.min=0.10 y.max=0.20
region	num=3	material=GaAs x.min=0.0 x.max=1.00 y.min=0.20 y.max=0.90

#Define electrode names and positions
#The first line places an electrode named 'anode' at the top
#of the structure (y=0), with a starting location and length
electr  name=anode  x.min=0  length=0.4 y.min=0.100 y.max=0.100
electr  name=cathode  x.min=0.600  length=0.400 y.min=0.100 y.max=0.100

#The second electr line defines an electrode named 'cathode' and 
#places it across the whole of the bottom of the structure


#Here we get to dope the material regions (1 and 2 from above)
doping     uniform reg=1  p.type conc=1.e18
doping     uniform reg=2  n.type conc=1.e18

#Now we save this structure as a .str file and plot it
save outf=diode_basic.str
tonyplot diode_basic.str

#But this plot doesn't tell us anything we didn't enter,
#so we tell ATLAS which models to apply
#Analytic for mobility, fldmob for velocity saturation
#and WATT for transverse field model
model   ANALYTIC  fldmob WATT  srh  auger  bgn 

#And add a work function to the Anode, for Ti=4.33 Au=5.2
contact    name=anode workf=4.76

#And then we solve for the initial conditions
solve  init

#And tell it which numerical methods to use for solving 
#the specified models
method newton

#Then we tell ATLAS to save the external properties to a log file
log   outfile=diode_ex.log

#And we tell it what values to solve each model for within the mesh
#Here we're solving for the conduction and valence bands, the
#Shockley-Reed-Hall recombination, Auger recombination, and 
#Carrier flow density vectors.
output con.band val.band u.srh u.aug flowlines

#Now we re-save our structure file with all of these solutions in it
save outf=diode_at_0V.str
tonyplot diode_at_0V.str

#We run a 400uA current throught he electrodes and see what happens
solve      IBASE=400e-6

#Then we save the structure all over again (it will save values for the
#vfinal above)
save outf=diode_at_1V.str
tonyplot diode_at_1V.str
tonyplot diode_ex.log

#Go get a cup of tea, ATLAS
quit


